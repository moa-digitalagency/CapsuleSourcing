{% extends "admin/base.html" %}

{% block title %}Modifier Element {{ highlight.slot }} - Admin Capsule{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Modifier l'element {{ highlight.slot }}</h1>
    <a href="{{ url_for('admin.featured_highlights') }}" class="btn btn-secondary">Retour</a>
</div>

<div class="card">
    <form method="POST" enctype="multipart/form-data">
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Titre *</label>
                <input type="text" name="title" class="form-control" value="{{ highlight.title }}" required>
            </div>
            <div class="form-group">
                <label class="form-label">Badge</label>
                <input type="text" name="badge" class="form-control" value="{{ highlight.badge or 'Artisanat' }}" placeholder="Ex: Collection, Artisanat, Nouveaute">
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Sous-titre / Description courte</label>
            <input type="text" name="subtitle" class="form-control" value="{{ highlight.subtitle or '' }}" placeholder="Ex: Pieces uniques de Fes et Safi">
        </div>
        
        <div class="form-group">
            <label class="form-label">Description detaillee (optionnel)</label>
            <textarea name="description" class="form-control" placeholder="Description plus longue si necessaire">{{ highlight.description or '' }}</textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">Image</label>
            {% if highlight.image %}
            <div style="margin-bottom: 15px; padding: 15px; background: #f5f5f5; border-radius: 8px; display: inline-block;">
                <img src="{{ highlight.image }}" alt="{{ highlight.title }}" style="max-width: 300px; max-height: 200px; border-radius: 8px; display: block;">
                <p style="margin-top: 8px; font-size: 0.85rem; color: #666;">Image actuelle</p>
            </div>
            {% endif %}
            <div class="file-input-wrapper">
                <div class="file-input-label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    Telecharger une nouvelle image
                </div>
                <input type="file" name="image" accept="image/*">
            </div>
            <p style="margin-top: 8px; font-size: 0.85rem; color: #888;">Format recommande: 500x400 pixels (JPG, PNG, WEBP)</p>
            <div style="margin-top: 10px;">
                <label class="form-label" style="font-size: 0.85rem;">Ou URL de l'image</label>
                <input type="text" name="image_url" class="form-control" placeholder="https://...">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Lien de destination</label>
                <input type="text" name="link" class="form-control" value="{{ highlight.link or '' }}" placeholder="Ex: /catalogue?category=ceramique">
            </div>
            <div class="form-group">
                <label class="form-label">Texte du bouton</label>
                <input type="text" name="link_text" class="form-control" value="{{ highlight.link_text or 'Explorer' }}" placeholder="Ex: Explorer, Decouvrir, Voir">
            </div>
        </div>
        
        <div class="form-group">
            <div class="form-check">
                <input type="checkbox" name="is_active" id="is_active" {% if highlight.is_active %}checked{% endif %}>
                <label for="is_active">Element actif (visible sur le site)</label>
            </div>
        </div>
        
        <div style="display: flex; gap: 12px; margin-top: 24px; padding-top: 20px; border-top: 1px solid #eee;">
            <button type="submit" class="btn btn-primary">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                    <polyline points="17 21 17 13 7 13 7 21"/>
                    <polyline points="7 3 7 8 15 8"/>
                </svg>
                Enregistrer
            </button>
            <a href="{{ url_for('admin.featured_highlights') }}" class="btn btn-secondary">Annuler</a>
        </div>
    </form>
</div>
{% endblock %}
