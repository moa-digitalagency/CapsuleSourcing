{% extends "admin/base.html" %}

{% block title %}SEO - Admin Capsule{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Parametres SEO</h1>
</div>

<div class="tabs">
    {% for page in pages %}
    <div class="tab {% if loop.first %}active{% endif %}" onclick="showTab('{{ page }}')">{{ page|capitalize }}</div>
    {% endfor %}
</div>

{% for page in pages %}
<div class="tab-content {% if loop.first %}active{% endif %}" id="tab-{{ page }}">
    <div class="card">
        <h3 class="card-title">Page: {{ page|capitalize }}</h3>
        <form method="POST" action="{{ url_for('admin.update_seo', page=page) }}" enctype="multipart/form-data">
            <div class="form-group">
                <label class="form-label">Meta Title</label>
                <input type="text" name="meta_title" class="form-control" value="{{ seo_settings[page].meta_title or '' }}" placeholder="Titre de la page pour les moteurs de recherche">
            </div>
            
            <div class="form-group">
                <label class="form-label">Meta Description</label>
                <textarea name="meta_description" class="form-control" placeholder="Description de la page (max 160 caracteres)">{{ seo_settings[page].meta_description or '' }}</textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">Meta Keywords</label>
                <input type="text" name="meta_keywords" class="form-control" value="{{ seo_settings[page].meta_keywords or '' }}" placeholder="mot-cle1, mot-cle2, mot-cle3">
            </div>
            
            <h4 style="margin: 24px 0 16px; color: #666;">Open Graph (reseaux sociaux)</h4>
            
            <div class="form-group">
                <label class="form-label">OG Title</label>
                <input type="text" name="og_title" class="form-control" value="{{ seo_settings[page].og_title or '' }}">
            </div>
            
            <div class="form-group">
                <label class="form-label">OG Description</label>
                <textarea name="og_description" class="form-control">{{ seo_settings[page].og_description or '' }}</textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">OG Image</label>
                {% if seo_settings[page].og_image %}
                <div style="margin-bottom: 10px;">
                    <img src="{{ seo_settings[page].og_image }}" alt="" class="image-preview">
                </div>
                {% endif %}
                <div class="file-input-wrapper">
                    <div class="file-input-label">Telecharger une image</div>
                    <input type="file" name="og_image" accept="image/*">
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary">Enregistrer</button>
        </form>
    </div>
</div>
{% endfor %}

<script>
function showTab(tabId) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    event.target.classList.add('active');
    document.getElementById('tab-' + tabId).classList.add('active');
}
</script>
{% endblock %}
