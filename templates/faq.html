{% extends "base.html" %}

{% block title %}{{ content.header.title if content and content.header else "FAQ" }} - Capsule{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <h1>{{ content.header.title if content and content.header else "Questions Frequentes" }}</h1>
        <p>{{ content.header.subtitle if content and content.header else "Retrouvez les reponses aux questions les plus posees" }}</p>
    </div>
</section>

<section class="faq-section">
    <div class="container">
        <div class="faq-list">
            {% for faq in faqs %}
            <div class="faq-item">
                <button class="faq-question" onclick="toggleFaq(this)">
                    <span>{{ faq.question }}</span>
                    <span class="faq-toggle">+</span>
                </button>
                <div class="faq-answer">
                    <p>{{ faq.answer }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="faq-contact">
    <div class="container">
        <div class="faq-contact-content">
            <h2>{{ content.cta.title if content and content.cta else "Vous n'avez pas trouve votre reponse ?" }}</h2>
            <p>{{ content.cta.description if content and content.cta else "Notre equipe est disponible pour repondre a toutes vos questions." }}</p>
            <div class="faq-contact-options">
                <div class="contact-option">
                    <h4>Par Email</h4>
                    <p>{{ contact_info.email if contact_info else 'contact@capsule-maroc.com' }}</p>
                </div>
                {% if contact_info and contact_info.whatsapp %}
                <div class="contact-option">
                    <h4>Par WhatsApp</h4>
                    <p><a href="https://wa.me/{{ contact_info.whatsapp|replace('+', '')|replace(' ', '') }}" target="_blank">{{ contact_info.whatsapp }}</a></p>
                </div>
                {% endif %}
            </div>
            <a href="{{ url_for('main.contact') }}" class="btn-primary">{{ content.cta.button if content and content.cta else "Nous Contacter" }}</a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
function toggleFaq(button) {
    const item = button.parentElement;
    const answer = item.querySelector('.faq-answer');
    const toggle = button.querySelector('.faq-toggle');
    
    if (item.classList.contains('active')) {
        item.classList.remove('active');
        answer.style.maxHeight = null;
        toggle.textContent = '+';
    } else {
        document.querySelectorAll('.faq-item.active').forEach(function(activeItem) {
            activeItem.classList.remove('active');
            activeItem.querySelector('.faq-answer').style.maxHeight = null;
            activeItem.querySelector('.faq-toggle').textContent = '+';
        });
        
        item.classList.add('active');
        answer.style.maxHeight = answer.scrollHeight + 'px';
        toggle.textContent = '-';
    }
}
</script>
{% endblock %}
