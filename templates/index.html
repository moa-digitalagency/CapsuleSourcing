{% extends "base.html" %}

{% block title %}Capsule - Artisanat Marocain d'Exception{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero-grid">
        <div class="hero-main">
            <img src="{{ hero.main_image or url_for('static', filename='images/moroccan_pottery_cer_db1d11f8.jpg') }}" alt="Artisanat Marocain" class="hero-bg-image">
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1 class="hero-title">{{ hero.title|replace(' ', '<br>')|safe if hero else "L'Art<br>du<br>Savoir-Faire<br>Marocain" }}</h1>
                <p class="hero-subtitle">{{ hero.subtitle if hero else "Des pieces uniques, faconnees par des mains expertes" }}</p>
                <a href="{{ url_for('catalogue.catalogue') }}" class="btn-hero">{{ hero.button_text if hero else "Decouvrir la Collection" }}</a>
            </div>
        </div>
        
        <div class="hero-side-cards">
            <div class="hero-card">
                <img src="{{ hero.card1_image or url_for('static', filename='images/moroccan_woodwork_fu_19c5df4f.jpg') }}" alt="{{ hero.card1_title if hero else 'Travail du Bois' }}" class="hero-card-image">
                <div class="hero-card-overlay">
                    <h3>{{ hero.card1_title if hero else "Ebenisterie" }}</h3>
                    <p>{{ hero.card1_subtitle if hero else "Le travail du bois traditionnel" }}</p>
                    <a href="{{ url_for('catalogue.catalogue', category=hero.card1_link if hero else 'mobilier') }}" class="hero-card-btn">Explorer</a>
                </div>
            </div>
            
            <div class="hero-card">
                <img src="{{ hero.card2_image or url_for('static', filename='images/moroccan_artisan_wor_de89e55a.jpg') }}" alt="{{ hero.card2_title if hero else 'Fibres Naturelles' }}" class="hero-card-image">
                <div class="hero-card-overlay">
                    <h3>{{ hero.card2_title if hero else "Fibres Naturelles" }}</h3>
                    <p>{{ hero.card2_subtitle if hero else "Vannerie et tissage artisanal" }}</p>
                    <a href="{{ url_for('catalogue.catalogue', category=hero.card2_link if hero else 'textile') }}" class="hero-card-btn">Explorer</a>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="stats-section">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-number">{{ stats.artisans if stats else 50 }}+</span>
                <span class="stat-label">{{ content.stats.artisans_label if content and content.stats else "Artisans Partenaires" }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ stats.products if stats else 200 }}+</span>
                <span class="stat-label">{{ content.stats.products_label if content and content.stats else "References Produits" }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ stats.partners if stats else 35 }}+</span>
                <span class="stat-label">{{ content.stats.partners_label if content and content.stats else "Clients B2B" }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ stats.countries if stats else 12 }}</span>
                <span class="stat-label">{{ content.stats.countries_label if content and content.stats else "Pays Livres" }}</span>
            </div>
        </div>
    </div>
</section>

<section class="featured-section">
    <div class="container">
        <div class="section-header">
            <span class="section-label">{{ content.featured.section_label if content and content.featured else "NOTRE SELECTION" }}</span>
            <h2>{{ content.featured.title if content and content.featured else "Nos Creations Phares" }}</h2>
            <p>{{ content.featured.description if content and content.featured else "Une selection rigoureuse de pieces emblematiques representant le meilleur de l'artisanat marocain. Chaque creation est le fruit d'un savoir-faire ancestral transmis de generation en generation." }}</p>
        </div>
        
        {% if featured_products|length > 0 %}
        <div class="vedette-grid">
            <div class="vedette-main">
                <div class="vedette-main-image">
                    {% if featured_products[0].image %}
                    <img src="{{ featured_products[0].image }}" alt="Produit vedette">
                    {% else %}
                    <div class="vedette-placeholder">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21 15 16 10 5 21"/>
                        </svg>
                    </div>
                    {% endif %}
                </div>
                <div class="vedette-main-content">
                    <span class="vedette-badge">VEDETTE</span>
                    <h3 class="vedette-main-title">{{ featured_products[0].name or 'Artisanat Marocain' }}</h3>
                    <p class="vedette-main-desc">{{ featured_products[0].description[:150] + '...' if featured_products[0].description and featured_products[0].description|length > 150 else (featured_products[0].description or 'Piece unique faconnee a la main par nos artisans') }}</p>
                    <a href="{{ url_for('catalogue.catalogue') }}#produit-{{ featured_products[0].id }}" class="vedette-main-btn">Decouvrir</a>
                </div>
            </div>
            
            <div class="vedette-cards">
                {% for product in featured_products[1:5] %}
                <div class="vedette-card">
                    <div class="vedette-card-image">
                        {% if product.image %}
                        <img src="{{ product.image }}" alt="Produit vedette">
                        {% else %}
                        <div class="vedette-placeholder-small">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21 15 16 10 5 21"/>
                            </svg>
                        </div>
                        {% endif %}
                    </div>
                    <div class="vedette-card-content">
                        <h4 class="vedette-card-title">{{ product.name or 'Produit Artisanal' }}</h4>
                        <p class="vedette-card-subtitle">{{ product.material or 'Artisanat marocain' }}</p>
                        <a href="{{ url_for('catalogue.catalogue') }}#produit-{{ product.id }}" class="vedette-card-link">Voir le produit</a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div class="no-featured-products" style="text-align: center; padding: 60px 20px; color: #666;">
            <p>Aucun produit en vedette pour le moment.</p>
            <p style="font-size: 0.9rem; margin-top: 10px;">Ajoutez des produits en vedette depuis le panel admin.</p>
        </div>
        {% endif %}
        
        <div class="section-cta">
            <a href="{{ url_for('catalogue.catalogue') }}" class="btn-explore">{{ content.featured.cta_button if content and content.featured else "Voir Toute la Collection" }}</a>
        </div>
    </div>
</section>

<section class="values-section">
    <div class="container">
        <div class="section-header">
            <span class="section-label">{{ content.our_values.section_label if content and content.our_values else "Nos Valeurs" }}</span>
            <h2>{{ content.our_values.title if content and content.our_values else "Authenticite, Ethique, Excellence" }}</h2>
            <p>{{ content.our_values.description if content and content.our_values else "Trois piliers fondamentaux qui guident notre approche du sourcing artisanal." }}</p>
        </div>
        
        <div class="values-grid-expanded">
            <div class="value-card-expanded">
                <div class="value-header">
                    <div class="value-icon-modern">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                    </div>
                    <h3>{{ content.our_values.value1_title if content and content.our_values else "Authenticite" }}</h3>
                </div>
                <p class="value-description">{{ content.our_values.value1_description if content and content.our_values else "Chaque piece est creee a la main par des artisans marocains qualifies." }}</p>
                <ul class="value-points">
                    {% set points = (content.our_values.value1_points if content and content.our_values else "Tracabilite complete|Techniques traditionnelles|Materiaux locaux|Certification d'origine").split('|') %}
                    {% for point in points %}
                    <li>{{ point }}</li>
                    {% endfor %}
                </ul>
            </div>
            
            <div class="value-card-expanded">
                <div class="value-header">
                    <div class="value-icon-modern">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 6v6l4 2"></path>
                        </svg>
                    </div>
                    <h3>{{ content.our_values.value2_title if content and content.our_values else "Ethique" }}</h3>
                </div>
                <p class="value-description">{{ content.our_values.value2_description if content and content.our_values else "Nous collaborons directement avec les artisans locaux pour garantir des pratiques equitables." }}</p>
                <ul class="value-points">
                    {% set points = (content.our_values.value2_points if content and content.our_values else "Commerce equitable|Remuneration juste|Soutien cooperatives|Conditions de travail").split('|') %}
                    {% for point in points %}
                    <li>{{ point }}</li>
                    {% endfor %}
                </ul>
            </div>
            
            <div class="value-card-expanded">
                <div class="value-header">
                    <div class="value-icon-modern">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                        </svg>
                    </div>
                    <h3>{{ content.our_values.value3_title if content and content.our_values else "Excellence" }}</h3>
                </div>
                <p class="value-description">{{ content.our_values.value3_description if content and content.our_values else "Une selection rigoureuse de creations uniques alliant esthetique et savoir-faire." }}</p>
                <ul class="value-points">
                    {% set points = (content.our_values.value3_points if content and content.our_values else "Controle qualite|Meilleurs artisans|Finitions irreprochables|Standards internationaux").split('|') %}
                    {% for point in points %}
                    <li>{{ point }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</section>

<section class="process-overview">
    <div class="container">
        <div class="section-header">
            <span class="section-label">{{ content.process.section_label if content and content.process else "Notre Methode" }}</span>
            <h2>{{ content.process.title if content and content.process else "Un Processus Eprouve" }}</h2>
            <p>{{ content.process.description if content and content.process else "De la selection a la livraison, nous assurons un accompagnement complet." }}</p>
        </div>
        
        <div class="process-steps-home">
            {% for step in process_steps %}
            {% if not loop.first %}<div class="process-connector"></div>{% endif %}
            <div class="process-step-home">
                <div class="step-icon">{{ step.number }}</div>
                <h4>{{ step.title }}</h4>
                <p>{{ step.description[:80] }}...</p>
            </div>
            {% endfor %}
        </div>
        
        <div class="section-cta">
            <a href="{{ url_for('business.processus') }}" class="btn-secondary">{{ content.process.cta_button if content and content.process else "Decouvrir Notre Processus" }}</a>
        </div>
    </div>
</section>


<section class="testimonials-section">
    <div class="container">
        <div class="section-header">
            <span class="section-label">{{ content.testimonials.section_label if content and content.testimonials else "Temoignages" }}</span>
            <h2>{{ content.testimonials.title if content and content.testimonials else "Ce Que Disent Nos Clients" }}</h2>
        </div>
        <div class="testimonials-grid">
            {% for testimonial in testimonials %}
            <div class="testimonial-card">
                <p class="testimonial-text">{{ testimonial.text }}</p>
                <div class="testimonial-author">
                    <div class="testimonial-avatar">
                        <img src="{{ testimonial.author_image or url_for('static', filename='images/avatar1.jpg') }}" alt="{{ testimonial.author_name }}">
                    </div>
                    <div>
                        <h4>{{ testimonial.author_name }}</h4>
                        <p>{{ testimonial.author_title }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="cta-section">
    <div class="container">
        <div class="cta-content-large">
            <h2>{{ content.cta.title if content and content.cta else "Pret a Integrer l'Artisanat Marocain dans Vos Projets ?" }}</h2>
            <p>{{ content.cta.description if content and content.cta else "Contactez notre equipe pour discuter de vos besoins et recevoir une proposition personnalisee." }}</p>
            <div class="cta-buttons">
                <a href="{{ url_for('main.contact') }}" class="btn-primary-large">{{ content.cta.button1_text if content and content.cta else "Nous Contacter" }}</a>
                <a href="{{ url_for('catalogue.catalogue') }}" class="btn-secondary-large">{{ content.cta.button2_text if content and content.cta else "Voir le Catalogue" }}</a>
            </div>
        </div>
    </div>
</section>

<section class="newsletter-section">
    <div class="container">
        <div class="newsletter-content">
            <h2>{{ content.newsletter.title if content and content.newsletter else "Restez Informes" }}</h2>
            <p>{{ content.newsletter.description if content and content.newsletter else "Recevez en avant-premiere nos nouvelles collections et actualites" }}</p>
            <form class="newsletter-form" id="newsletterForm">
                <input type="email" placeholder="{{ content.newsletter.placeholder if content and content.newsletter else 'Votre adresse email professionnelle' }}" class="newsletter-input" required>
                <button type="submit" class="newsletter-btn">{{ content.newsletter.button if content and content.newsletter else "S'inscrire" }}</button>
            </form>
        </div>
    </div>
</section>
{% endblock %}
